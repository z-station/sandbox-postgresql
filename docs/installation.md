# Инструкция по развертке среды разработчика

Единственно верный способ развернуть приложение на локальном компьютере - это 
запустить приложение в докер-контейнере.
Сервис состоит из двух частей: web-приложение и база данных, оба компонента 
находятся в отдельных контейнерах связанные через сеть "docker_localhost" и 
точку монтирования с файловой системой host-машины "sql_files".

### Зависимости:
- Docker >= 19
- Docker Compose >= 1.17  
- Git >= 2.17

**1. Установить зависимости**

**2. Склонировать проект из git-репозитория**

Шаги:
- Настроить глобальный git config [по инструкции](https://git-scm.com/book/ru/v2/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%9F%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-Git).
- Зарегистрироваться на [github.com](https://github.com/).
- Сделать форк данного репозитория (если выданы права на запись в репозиторий, то пропустить шаг).
- Склонировать репозиторий.
- Далее все манипуляции будут осуществляться на базе склонированного проекта.

**3. Запуск web-приложения на локальной машине**

Перейти в каталог scripts и выполнить script запуска приложения ``up``.
После этого сервис должен стать доступен в браузере по адресу [http://localhost:9004](http://localhost:9004/).

**4. Начало работы**

- Для работы API требуется иметь возможность создать базу данных из файла.
- Файл с расширением .sql необходимо предварительно создать посредством Postgresql >= 13 версии (или взять готовый).
- Загрузить .sql файл в папку host-машины, которая указана в поле Mountpoint из результатов команды ``docker inspect docker_sql_files``.
- После этого API полностью функциональна, при создании баз данных через API в запросе ``/create`` указывать имя .sql файла из прошлого шага.
- Для взаимодействия с API сервиса на локальной машине проще всего использовать http-клиент Postman.

**5. Отладка кода и поиск ошибок**

В некоторых случаях внутренние ошибки невозможно отследить через API, 
для этого случая настроен logger, который выводит все SQL-команды и ошибки в лог контейнера.
Для их просмотра необходимо выполнить команду ``docker logs sandbox-postgresql``.
При необходимости логировать иные случаи, не следует использовать print, а следует использовать преднастроенный logger.